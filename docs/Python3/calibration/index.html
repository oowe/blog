<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/blog/rss.xml" title="OOWE&#39;s Software Develop Notes Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/blog/atom.xml" title="OOWE&#39;s Software Develop Notes Blog Atom Feed"><title data-react-helmet="true">Calibration | OOWE&#x27;s Software Develop Notes</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://oowe.github.io/blog/docs/Python3/calibration"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Calibration | OOWE&#x27;s Software Develop Notes"><meta data-react-helmet="true" name="description" content="為什麼我們要校正影像？"><meta data-react-helmet="true" property="og:description" content="為什麼我們要校正影像？"><link data-react-helmet="true" rel="shortcut icon" href="/blog/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://oowe.github.io/blog/docs/Python3/calibration"><link data-react-helmet="true" rel="alternate" href="https://oowe.github.io/blog/docs/Python3/calibration" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://oowe.github.io/blog/docs/Python3/calibration" hreflang="x-default"><link rel="stylesheet" href="/blog/assets/css/styles.adc17638.css">
<link rel="preload" href="/blog/assets/js/runtime~main.d29ae7c2.js" as="script">
<link rel="preload" href="/blog/assets/js/main.eea4348d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/blog/"><img src="/blog/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/blog/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">OOWE</b></a><a class="navbar__item navbar__link navbar__link--active" href="/blog/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oowe" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/blog/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorial - Basics</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorial - Extras</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Markdown</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Git</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Linux</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">AWS</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">AlmaLinux</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Althttpd</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Angular</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">C++</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">C4 Model</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CICD</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Django</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Docker</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Docusaurus2</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Figma</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Github</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Java</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">JavaScript</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Jenkins</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Jetson Xavier NX</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kubernetes</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Lighttpd</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Logger</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">MongoDB</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Multipass</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">MySQL Workbench</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">MySQL</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">NestJS</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">NodeJS</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">OpenADR</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Oracle VM VirtualBox</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">PHP</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">PlantUML</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">PostgreSQL</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Postman</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Python3</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/Python3/command">Command</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/blog/docs/Python3/calibration">Calibration</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/Python3/document">Document</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/Python3/gem">---</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/Python3/h265-h264">H.265 VS H.264</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/Python3/multi-processing">Multi-processing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/Python3/opencv">OpenCV</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/Python3/videocapture-grab-read">VideoCapture grab() vs read()</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">RTSP</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Rasberrypi3</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Ruby</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">SRE</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Shell Script</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">TLS</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Typescript</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">UML</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">VMWare EXSi</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">VMware Workstation Player</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">VirtualBox</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Visual Studio Code</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Visual Studio</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Windows</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Wireshark</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">XML</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">YAML</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Calibration</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="為什麼我們要校正影像"></a>為什麼我們要校正影像？<a class="hash-link" href="#為什麼我們要校正影像" title="Direct link to heading">#</a></h3><p>針孔成像、光線不足來快速曝光、眼睛和攝影機都需要透鏡、收集更多光線、引發透鏡畸變</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="什麼是焦距"></a>什麼是焦距？<a class="hash-link" href="#什麼是焦距" title="Direct link to heading">#</a></h3><p>針孔到成像平面之間的距離
原來，難怪焦距越長，物體的大小越大</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="為什麼會有透鏡畸變"></a>為什麼會有透鏡畸變？<a class="hash-link" href="#為什麼會有透鏡畸變" title="Direct link to heading">#</a></h3><p>其實就是透頭本身的問題，光線在遠離透鏡中心的地方比靠近中心的地方還要彎曲</p><p>分三種情況</p><ol><li>正常情形</li><li>桶狀變形</li><li>枕狀變形</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="參考資料"></a>參考資料<a class="hash-link" href="#參考資料" title="Direct link to heading">#</a></h3><p>逍遙文工作室（相機校準（Camera Calibration）|＃校正的概念
<a href="https://cg2010studio.com/2012/05/25/opencv-%E7%9B%B8%E6%A9%9F%E6%A0%A1%E6%BA%96-camera-calibration/" target="_blank" rel="noopener noreferrer">https://cg2010studio.com/2012/05/25/opencv-%E7%9B%B8%E6%A9%9F%E6%A0%A1%E6%BA%96-camera-calibration/</a>
阿洲的程式教學（相機校正（Camera calibration））＃參數請參考這
<a href="http://monkeycoding.com/?p=781" target="_blank" rel="noopener noreferrer">http://monkeycoding.com/?p=781</a> #參數可以參考這裡
<a href="http://blog.csdn.net/piaoxuezhong/article/details/75268535" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/piaoxuezhong/article/details/75268535</a>
CSDN（利用的 OpenCV 的中的棋盤格標定法對魚眼圖像校正分析）＃針對函數進行說明
<a href="http://blog.csdn.net/zhangjunbob/article/details/52690869" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/zhangjunbob/article/details/52690869</a>
知乎（機器視覺的相機標定到底是什麼？）＃學到很多，超多人在討論
<a href="https://www.zhihu.com/question/29448299" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/29448299</a>
CSDN（張正友標定法）
<a href="http://blog.csdn.net/pinbodexiaozhu/article/details/43373247" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/pinbodexiaozhu/article/details/43373247</a>
相機標定＃待看
<a href="https://goo.gl/8m5kFn" target="_blank" rel="noopener noreferrer">https://goo.gl/8m5kFn</a>
CSDN（攝像機成像，畸變模型）算式詳細
<a href="http://blog.csdn.net/kfqcome/article/details/9411711" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/kfqcome/article/details/9411711</a>
Calibration 新方法試看看
<a href="http://blog.csdn.net/qq_15947787/article/details/51441128" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/qq_15947787/article/details/51441128</a></p><p>影像座標計算
<a href="http://blog.csdn.net/wangxiaokun671903/article/details/37966891" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/wangxiaokun671903/article/details/37966891</a>
<a href="http://blog.csdn.net/waeceo/article/details/50580607" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/waeceo/article/details/50580607</a>
<a href="http://blog.csdn.net/humanking7/article/details/44756073" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/humanking7/article/details/44756073</a>
<a href="http://blog.csdn.net/kfqcome/article/details/9411711" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/kfqcome/article/details/9411711</a></p><p>#試看看方法
全向攝影機
<a href="http://blog.csdn.net/j_d_c/article/details/76430289" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/j_d_c/article/details/76430289</a>
同心圓的方法
<a href="https://wenku.baidu.com/view/4392683c0b4c2e3f5727639d.html" target="_blank" rel="noopener noreferrer">https://wenku.baidu.com/view/4392683c0b4c2e3f5727639d.html</a>
<a href="http://blog.csdn.net/weixinhum/article/details/50719031" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/weixinhum/article/details/50719031</a>
github #defish
<a href="https://github.com/bovine/defish" target="_blank" rel="noopener noreferrer">https://github.com/bovine/defish</a> #小角度可以用
<a href="https://github.com/madaiqian/fisheye_calibration" target="_blank" rel="noopener noreferrer">https://github.com/madaiqian/fisheye_calibration</a> #很棒但要錢
<a href="http://paulbourke.net/dome/fish2/" target="_blank" rel="noopener noreferrer">http://paulbourke.net/dome/fish2/</a> #大陸的這個一定要看
<a href="https://github.com/KevinGuo0211/FishEye-Correct" target="_blank" rel="noopener noreferrer">https://github.com/KevinGuo0211/FishEye-Correct</a></p><p>180 度以上的魚眼要用球面透视投影模型
<a href="http://www.360doc.com/content/16/0111/20/248984_527188916.shtml" target="_blank" rel="noopener noreferrer">http://www.360doc.com/content/16/0111/20/248984_527188916.shtml</a></p><p><a href="http://download.csdn.net/detail/qq_15947787/9527601" target="_blank" rel="noopener noreferrer">http://download.csdn.net/detail/qq_15947787/9527601</a></p><p>camera_calibration
拾人牙慧點滴(OpenCV 範例程式 camera_calibration) #中文講解但不詳細
<a href="http://silverwind1982.pixnet.net/blog/post/229389799-opencv-%E7%AF%84%E4%BE%8B%E7%A8%8B%E5%BC%8F-camera_calibration" target="_blank" rel="noopener noreferrer">http://silverwind1982.pixnet.net/blog/post/229389799-opencv-%E7%AF%84%E4%BE%8B%E7%A8%8B%E5%BC%8F-camera_calibration</a>
CSDN(OpenCV 摄像机标定例程笔记) #有說明 in_VID5.xml
<a href="http://blog.csdn.net/richardzjut/article/details/39762001" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/richardzjut/article/details/39762001</a>
相機標定/校正（Camera Calibration）
<a href="http://www.cnblogs.com/clarenceliang/p/6544905.html" target="_blank" rel="noopener noreferrer">http://www.cnblogs.com/clarenceliang/p/6544905.html</a>
使用 OpenCV 進行相機標定 #超詳細
<a href="https://hk.saowen.com/a/8494111faa3e1c95e75d8c23ae52514e9c85f7073ef5d4e017a8db4899fa0a12" target="_blank" rel="noopener noreferrer">https://hk.saowen.com/a/8494111faa3e1c95e75d8c23ae52514e9c85f7073ef5d4e017a8db4899fa0a12</a>
Compile and run OpenCV code from the command line on Linux
<a href="https://www.learnopencv.com/how-to-compile-opencv-sample-code/" target="_blank" rel="noopener noreferrer">https://www.learnopencv.com/how-to-compile-opencv-sample-code/</a>
compile c++
<a href="http://dsynflo.blogspot.tw/2014/07/opencv-build-simple-opencv-program.html" target="_blank" rel="noopener noreferrer">http://dsynflo.blogspot.tw/2014/07/opencv-build-simple-opencv-program.html</a></p><p>OpenCV 兩種畸變校正模型源代碼分析以及 CUDA 實現
<a href="https://hk.saowen.com/a/3d540b6f184ea64faaa5b458b3c3fc6396ca995a6a01a38fa99a6cf13f0c2c4f" target="_blank" rel="noopener noreferrer">https://hk.saowen.com/a/3d540b6f184ea64faaa5b458b3c3fc6396ca995a6a01a38fa99a6cf13f0c2c4f</a>
魚眼成像
<a href="http://big5.sj33.cn/dphoto/SYQC/200707/11809.html" target="_blank" rel="noopener noreferrer">http://big5.sj33.cn/dphoto/SYQC/200707/11809.html</a>
相機成像
<a href="http://toments.com/649366/" target="_blank" rel="noopener noreferrer">http://toments.com/649366/</a>
（1）這個工作在做什麼
（2）和什麼東西相關
（3）應該去查那些資料
（4）實作</p><p>相機標定中的透鏡畸變和視角變換
<a href="http://dpinglee.lofter.com/?page=3&amp;t=1442459497542" target="_blank" rel="noopener noreferrer">http://dpinglee.lofter.com/?page=3&amp;t=1442459497542</a></p><p><a href="http://www.cnblogs.com/riddick/p/7811877.html" target="_blank" rel="noopener noreferrer">http://www.cnblogs.com/riddick/p/7811877.html</a>
<a href="https://github.com/WordZzzz/fisheye_calibration" target="_blank" rel="noopener noreferrer">https://github.com/WordZzzz/fisheye_calibration</a></p><p>opencv fisheye model code 講解
<a href="https://cloud.tencent.com/developer/article/1019525" target="_blank" rel="noopener noreferrer">https://cloud.tencent.com/developer/article/1019525</a></p><p>光線穿透過魚眼鏡頭後在感光元件上的成像會扭曲。我們的目的是想讓更多的場景容納進影像中，於是選擇接觸光源面積較廣的魚眼鏡頭，然而問題出現了〜這將會產生扭曲的影像，距離中心越遠的場景資料被壓縮得越多！而且原本該是筆直的線段都變成曲線。那麼這如何使扭曲的影像回復正常？這就是相機校準（Camera Calibration）的工作了。</p><p>通常的作法
目前的 OpenCV 的中的中的支持三種類型的校準圖表，分別是：1，經典的黑白色棋盤，2 對稱圓形圖案，3 非對稱圓形圖案。</p><p>（1）棋盤格
标定图片需要使用标定板在不同位置、不同角度、不同姿态下拍摄，最少需要 3 张，以 10~20 张为宜。</p><p>利用棋盤格來校正。準備一張棋盤狀的紙張，邊長最好是奇數 X 偶數，效果比較好！（這邊說的是棋盤的格數，但函數 findChessboardCorners 說是角的格數），約拍攝 10〜20 張。接著，程式會對這八對影像做辨識，從影像中找出 6×9 的棋盤，並針對立體數據作角標記，順序從紅色開始，接著橙色，黃色，綠色，藍色。再來，程式會根據八對影像找出平均曲率差，並以兩個角度對原影像做重新映射，以完成相機校準（Camera Calibration）的工作。</p><p>OpenCV 的中的計算公式
的 OpenCV 的中的在作相機校正時，有考量到徑向（徑向）和切向（切向）兩個因素，徑向失真會產生桶狀或類似魚眼效果的失真，對於一個校正前的像素點（X，Y），校正後的位置在（Xcorrected，Ycorrected），以下為徑向失真校正前後位置的關係：攝像機標定</p><p>切向失真主要發生在鏡頭和拍攝物體面不是平行，由以下的公式進行切向失真校正：攝像機標定</p><p>綜合以上兩個公式，OpenCV 主要考量以下五個參數的矩陣進行校正：Camera calibration</p><p>OpenCV 中的找棋盤角點
布爾 findChessboardCorners（InputArray 圖像，大小 patternSize，OutputArray 角，詮釋標誌= CALIB_CB_ADAPTIVE_THRESH + CALIB_CB_NORMALIZE_IMAGE）</p><p>圖像：輸入圖，必須為 8 位元的灰階或彩色影像。
patternSize：棋盤的尺寸，patternSize = Size（points_per_row，points_per_colum）=大小（列，行）。
角落：輸出角點。
國旗：旗標，CV_CALIB_CB_ADAPTIVE_THRESH 表示使用區域自適應濾波進行二值化，CV_CALIB_CB_NORMALIZE_IMAGE 表示二值化前先呼叫 equalizeHist（）。
有找到棋盤角點返回真，否則返回假。
OpenCV 中找到精確角點
void cornerSubPix（InputArray 圖像，InputOutputArray 角落，大小 winSize，大小 zeroZone，TermCriteria 標準）</p><p>圖片：輸入圖。
角落：輸入角點，會更新成更精確的位置。
使用 winsize：搜尋範圍，假設輸入尺寸（5,5），則會搜尋 5 * 2 + 1 的範圍，也就是 11×11 的尺寸
標準：迭代搜尋的終止條件。
OpenCV 相機校正</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">double calibrateCamera（InputArrayOfArrays objectPoints，InputArrayOfArrays imagePoints，Size imageSize，InputOutputArray cameraMatrix，InputOutputArray distCoeffs，OutputArrayOfArrays rvecs，OutputArrayOfArrays tvecs，int flags </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">，TermCriteria criteria </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TermCriteria（TermCriteria :: COUNT + TermCriteria :: EPS，30，DBL_EPSILON））</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">objectPoints：校正座標系統的位置，輸入型態為 std :: vector </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">std :: vector </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cv :: Vec3f</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain">。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">imagePoints：校正點的投影，輸入型態為 std::vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> std::vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> cv::Vec2f </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">，imagePoints.size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">和 objectPoints.size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">必須相同，且 imagePoints</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">和 objectPoints</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">也必須相同。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">imageSize：影像尺寸。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">cameraMatrix：輸出 </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">×3 浮點數的相機矩陣。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">distCoeffs：輸出的畸變參數，</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k_1, k_2, p_1, p_2</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">, k_3</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">, k_4, k_5, k_6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> 的 </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">、5 或 </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"> 個元素。</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="opencv-校正矩陣"></a>OpenCV 校正矩陣<a class="hash-link" href="#opencv-校正矩陣" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">void initUndistortRectifyMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InputArray cameraMatrix</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> InputArray distCoeffs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> InputArray R</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> InputArray newCameraMatrix</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Size size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> m1type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> OutputArray map1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> OutputArray map2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">cameraMatrix：輸入的相機矩陣。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">distCoeffs：輸入的畸變參數。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">newCameraMatrix：新的相機矩陣。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">size：沒有畸變影像的尺寸。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">m1type：map1 的型態，可以為 CV_32FC1 或 CV_16SC2。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">map1：第一個輸出矩陣。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">map2：第二個輸出矩陣。</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="相機標定"></a>相機標定<a class="hash-link" href="#相機標定" title="Direct link to heading">#</a></h3><p>相機標定得到的內參僅僅是對相機物理特性的【近似】，這一點有些人可能一輩子都沒辦法意識到。傳統相機標定假設相機是小孔成像模型，一般使用兩種畸變來模擬鏡片的物理畸變。但實際相機的物理特性很可能沒辦法通過上述假設來得到完全的擬合。所以需要意識到，每一次相機標定僅僅只是對物理相機模型的一次近似，再具體一點來說，每一次標定僅僅是對相機物理模型在採樣空間範圍內的一次近似。所以當你成像物體所在的空間跟相機標定時的採樣空間不一樣的時候，你可能永遠都沒辦法得到足夠的精度，當你大幅改變相機與成像物體的距離的時候，你最好重新標定相機。如果你想在一個空間裡得到更高的精度，你可以在空間里分層多次標定，實際計算的時候通過其他方式得到成像距離，從而選擇合適的標定參數。
然後，說到為什麼需要 20 張圖片，這只是一個經驗值，實際上太多也不好，太少也不好。單純從統計上來看，可能越多會越好，但是，實際上圖片太多可能會讓參數優化的結果變差，因為棋盤格角點坐標的確定是存在誤差的，而且這種誤差很難說是符合高斯分佈的，同時，標定過程所用的非線性迭代優化算法不能保證總是得到最優解，而更多的圖片，可能會增加算法陷入局部最優的可能性。拍照時的標定板位置和朝向的多樣性，會讓內參的估計更為準確。準確的內參可以較好地把整個圖像的畸變都進行矯正，但如果給定的標定板的位置過於單一，比如都是在圖像的左上角，那麼優化得到的內參也可能只會比較好地糾正圖像左上角的畸變。推薦找個畸變較大的鏡頭做做實驗，會更形象。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/Python3/calibration.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/docs/Python3/command"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Command</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/docs/Python3/document"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Document »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#為什麼我們要校正影像" class="table-of-contents__link">為什麼我們要校正影像？</a></li><li><a href="#什麼是焦距" class="table-of-contents__link">什麼是焦距？</a></li><li><a href="#為什麼會有透鏡畸變" class="table-of-contents__link">為什麼會有透鏡畸變？</a></li><li><a href="#參考資料" class="table-of-contents__link">參考資料</a></li><li><a href="#opencv-校正矩陣" class="table-of-contents__link">OpenCV 校正矩陣</a></li><li><a href="#相機標定" class="table-of-contents__link">相機標定</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Local Link</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/docs/intro">Doc</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">About Me</div><ul class="footer__items"><li class="footer__item"><a href="mailto:oowe9564@gmail.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gmail<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/aaron-chang-oowe/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oowe" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022-2022 OOWE. Built with Docusaurus.</div></div></div></footer></div>
<script src="/blog/assets/js/runtime~main.d29ae7c2.js"></script>
<script src="/blog/assets/js/main.eea4348d.js"></script>
</body>
</html>