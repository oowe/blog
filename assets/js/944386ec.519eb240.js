"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[818],{3905:function(e,n,t){t.d(n,{Zo:function(){return i},kt:function(){return d}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var E=r.createContext({}),c=function(e){var n=r.useContext(E),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},i=function(e){var n=c(e.components);return r.createElement(E.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,E=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),p=c(t),d=a,u=p["".concat(E,".").concat(d)]||p[d]||m[d]||o;return t?r.createElement(u,s(s({ref:n},i),{},{components:t})):r.createElement(u,s({ref:n},i))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,s=new Array(o);s[0]=p;var l={};for(var E in n)hasOwnProperty.call(n,E)&&(l[E]=n[E]);l.originalType=e,l.mdxType="string"==typeof e?e:a,s[1]=l;for(var c=2;c<o;c++)s[c]=t[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},6804:function(e,n,t){t.r(n),t.d(n,{contentTitle:function(){return E},default:function(){return p},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return i}});var r=t(7462),a=t(3366),o=(t(7294),t(3905)),s=["components"],l={sidebar_position:1},E="Command",c={unversionedId:"MySQL/command",id:"MySQL/command",isDocsHomePage:!1,title:"Command",description:"Reference from https://blog.csdn.net/zyb2017/article/details/78449910",source:"@site/docs/MySQL/command.md",sourceDirName:"MySQL",slug:"/MySQL/command",permalink:"/blog/docs/MySQL/command",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/MySQL/command.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Command",permalink:"/blog/docs/MySQL Workbench/command"},next:{title:"Create Continer",permalink:"/blog/docs/MySQL/create-container"}},i=[{value:"Insert data",id:"insert-data",children:[]},{value:"\u5099\u4efd\u8207\u9084\u539f\u6307\u4ee4",id:"\u5099\u4efd\u8207\u9084\u539f\u6307\u4ee4",children:[]},{value:"\u4e00\u6b21\u67e5\u8a62\u6240\u6709\u8cc7\u6599\u8868\u7b46\u6578",id:"\u4e00\u6b21\u67e5\u8a62\u6240\u6709\u8cc7\u6599\u8868\u7b46\u6578",children:[]},{value:"Login",id:"login",children:[]},{value:"Drop table",id:"drop-table",children:[]},{value:"foregin_key",id:"foregin_key",children:[]},{value:"create table",id:"create-table",children:[]}],m={toc:i};function p(e){var n=e.components,t=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"command"},"Command"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Reference from ",(0,o.kt)("a",{parentName:"strong",href:"https://blog.csdn.net/zyb2017/article/details/78449910"},"https://blog.csdn.net/zyb2017/article/details/78449910")),(0,o.kt)("br",{parentName:"p"}),"\n",(0,o.kt)("strong",{parentName:"p"},"Reference from ",(0,o.kt)("a",{parentName:"strong",href:"https://notes.andywu.tw/2018/%E8%B3%87%E6%96%99%E5%BA%AB-%E9%97%9C%E8%81%AF%E4%BB%8B%E7%B4%B9-%E4%B8%80%E5%B0%8D%E4%B8%80%E3%80%81%E4%B8%80%E5%B0%8D%E5%A4%9A%E3%80%81%E5%A4%9A%E5%B0%8D%E5%A4%9A/"},"https://notes.andywu.tw/2018/%E8%B3%87%E6%96%99%E5%BA%AB-%E9%97%9C%E8%81%AF%E4%BB%8B%E7%B4%B9-%E4%B8%80%E5%B0%8D%E4%B8%80%E3%80%81%E4%B8%80%E5%B0%8D%E5%A4%9A%E3%80%81%E5%A4%9A%E5%B0%8D%E5%A4%9A/")),(0,o.kt)("br",{parentName:"p"}),"\n",(0,o.kt)("strong",{parentName:"p"},"Reference from ",(0,o.kt)("a",{parentName:"strong",href:"https://segmentfault.com/a/1190000024500891"},"https://segmentfault.com/a/1190000024500891")),(0,o.kt)("br",{parentName:"p"}),"\n",(0,o.kt)("strong",{parentName:"p"},"Reference from ",(0,o.kt)("a",{parentName:"strong",href:"https://blog.longwin.com.tw/2015/06/mysql-grant-revoke-modify-2015/"},"https://blog.longwin.com.tw/2015/06/mysql-grant-revoke-modify-2015/"))),(0,o.kt)("h3",{id:"insert-data"},"Insert data"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"-- insert school\nINSERT INTO school (id, view, name, description) VALUES\n(1001, 7892, 'CHY', 'Girl')\nON DUPLICATE KEY UPDATE name=VALUES(name), description=VALUES(description);\n")),(0,o.kt)("h3",{id:"\u5099\u4efd\u8207\u9084\u539f\u6307\u4ee4"},"\u5099\u4efd\u8207\u9084\u539f\u6307\u4ee4"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"#backup\nmysqldump -u {MYSQL_USER} -p${MYSQL_PWD} --no-tablespaces ems > backup_20220106.dump.sql\n#restore\nmysql -u {MYSQL_USER} -p${MYSQL_PWD} ems < backup_20220106.dump.sql\n")),(0,o.kt)("h3",{id:"\u4e00\u6b21\u67e5\u8a62\u6240\u6709\u8cc7\u6599\u8868\u7b46\u6578"},"\u4e00\u6b21\u67e5\u8a62\u6240\u6709\u8cc7\u6599\u8868\u7b46\u6578"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"select TABLE_NAME, TABLE_ROWS from INFORMATION_SCHEMA.TABLES WHERE table_schema = '{dbename}';\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'disable auto start\nsudo systemctl disable mysql\n\n\n\n\n\u6ce8\u610f\u4e8b\u9805\n\u61c9\u7528\u7a0b\u5f0f\u5118\u91cf\u4e0d\u8981\u7528root\u5e33\u865f\n\ninstall mysql\nsudo apt install mysql-server\nsudo mysql_secure_installation\n\u90fd\u662fY\nsudo /etc/init.d/mysql restart\nor\nservice mysql restart\n#in arm64\nnviai nx apt \u53ea\u6709\u652f\u63f45.7\n\u82e5\u8981\u81ea\u5df1\u5b89\u88dd\u8981\u5b89\u88dd\u8d85\u591adepends\n\u5f88\u9ebb\u7169 \u5efa\u8b70\u4f7f\u7528Docker\n\n\n\u67e5\u8a62\u7248\u672c\nsudo mysql -v # 8.0.25-0ubuntu0.20.04.1\n\n\u4fee\u6539root\u5bc6\u78bc\nsudo mysql\nSHOW VARIABLES LIKE \'validate_password%\';\nset global validate_password.policy=0;\nset global validate_password.length=1;\nALTER USER \'root\'@\'localhost\' IDENTIFIED BY \'{password}\';\n\u91cd\u65b0\u8f09\u5165\u4f7f\u7528\u8005\u6b0a\u9650\u8a2d\u5b9a\nFLUSH PRIVILEGES;\n\n#in mysql 5.7\nset global validate_password_policy=0;\nset global validate_password._ength=1;\n\n\n\n\u65b0\u5efa\u5e33\u865f\nCREATE USER \'{username}\'@\'localhost\' IDENTIFIED WITH mysql_native_password BY \'{password}\';\n\n\u767b\u5165mysql\nmysql  -h 192.168.11.1 -u {username} -p{password} {dbname}\n\n\u986f\u793a\u6240\u6709\u8cc7\u6599\u5eab(DATABASE)\nshow databases;\n\n\u5efa\u7acb\u8cc7\u6599\u5eab(DATABASE)\nCREATE DATABASE `{dbname}`;\n\n\u66f4\u540d\u8cc7\u6599\u5eab\nRENAME TABLE `old_name` TO `new_name`;\n\n\u6307\u6d3eDB(EMS)\u7684\u5168\u90e8\u6b0a\u9650\u7d66\u4f7f\u7528\u8005\nGRANT ALL PRIVILEGES ON EMS.* TO \'{username}\'@\'%\';\n\u6307\u6d3e\u5168\u90e8DB\u6b0a\u9650\nGRANT ALL PRIVILEGES ON *.* TO \'{username}\'@\'%\';\n\u91cd\u65b0\u8f09\u5165\u4f7f\u7528\u8005\u6b0a\u9650\u8a2d\u5b9a\nFLUSH PRIVILEGES;\n\n\u767b\u5165Container\u5167\u7684\u65b9\u6cd5\nCREATE USER \'{username}\'@\'%\' IDENTIFIED BY \'{password}\';\nALTER USER \'{username}\'@\'%\' IDENTIFIED WITH mysql_native_password BY \'{password}\';\nGRANT ALL ON *.* TO \'{username}\'@\'%\';\n\n(\u89e3\u51b3Node.js mysql\u5ba2\u6237\u7aef\u4e0d\u652f\u6301\u8ba4\u8bc1\u534f\u8bae\u5f15\u53d1\u7684\u201cER_NOT_SUPPORTED_AUTH_MODE\u201d\u95ee\u9898)\n\n**Reference from https://waylau.com/node.js-mysql-client-does-not-support-authentication-protocol/**\n\n\n\u9032\u5165DATABASE;\nuse {dbname};\n\n\u986f\u793a\u8cc7\u6599\u8868(TABLE);\nshow tables;\n\n\u5efa\u7acb\u8cc7\u6599\u8868(TABLE)\nCREATE TABLE AIR_CONDITIONER_PROJECT ( CITY_NAME char(20) NOT NULL,  SCHOOL_NAME char(20) NOT NULL, CLASSROOM_NUMBER char(20) NOT NULL, AMMETER_UID char(30) NOT NULL, PRIMARY KEY(AMMETER_UID) );\n\n\u5efa\u7acb\u8cc7\u6599\n#\u6a19\u6e96\nINSERT INTO AIR_CONDITIONER_PROJECT (CITY_NAME, SCHOOL_NAME, CLASSROOM_NUMBER, AMMETER_UID) VALUES ("\u5b9c\u862d\u7e23", "\u7f85\u6771\u570b\u5c0f", "101", "00:00:00:00:00:01");\n#\u7c21\u7565\u7248\u4e26\u591a\u7b46\nINSERT INTO AIR_CONDITIONER_PROJECT VALUES ("\u5b9c\u862d\u7e23", "\u516c\u6b63\u570b\u5c0f", "101",\n"00:00:00:00:00:02"), ("\u65b0\u5317\u5e02", "\u65b0\u5e97\u570b\u5c0f", "101", "00:00:00:00:00:03");\n\nINSERT INTO AIR_CONDITIONER_PROJECT VALUES ("\u65b0\u5317\u5e02", "\u65b0\u5e97\u570b\u5c0f", "102",\n"00:00:00:00:00:04"), ("\u65b0\u5317\u5e02", "\u7db2\u6eaa\u570b\u5c0f", "101", "00:00:00:00:00:05"),("\u6f8e\u6e56\u7e23", "\u99ac\u516c\u570b\u5c0f", "101", "00:00:00:00:00:06");\n\n\u67e5\u6b04\u4f4d\u683c\u5f0f(TABLE)\ndescribe AIR_CONDITIONER_PROJECT;\ndesc AIR_CONDITIONER_PROJECT;\n\n\u67e5\u8a62\u8cc7\u6599(TABLE)\n#\u5168\u90e8\nSELECT * FROM AIR_CONDITIONER_PROJECT;\n#\u7279\u5b9a\u689d\u4ef6\nselect * from AIR_CONDITIONER_PROJECT WHERE CITY_NAME = "\u5b9c\u862d\u7e23";\n#\u6392\u5e8f(\u7531\u5c0f\u5230\u5927)\nselect * from AIR_CONDITIONER_PROJECT WHERE CITY_NAME = "\u65b0\u5317\u5e02" ORDER BY CLASSROOM_NUMBER ASC;\n#\u6392\u5e8f(\u7531\u5927\u5230\u5c0f)\nselect * from AIR_CONDITIONER_PROJECT WHERE CITY_NAME = "\u65b0\u5317\u5e02" ORDER BY CLASSROOM_NUMBER DESC;\n\n\u66f4\u65b0\u8cc7\u6599(TABLE)\n#\u6b04\u4f4d\u90fd\u8981\u7528`\u624d\u6b63\u78ba\nUPDATE `AIR_CONDITIONER_PROJECT`  SET `CITY_NAME` = "\u6f8e\u6e56\u7e231" WHERE `CITY_NAME` = "\u6f8e\u6e56\u7e23";\n\n\u522a\u9664\u55ae\u7b46\u8cc7\u6599\nDELETE FROM AIR_CONDITIONER_PROJECT WHERE AMMETER_UID = "00:00:00:00:00:07";\n\n\u522a\u9664TABLE\nDROP TABLE user;\n\n\n\u95dc\u9589\u670d\u52d9\nservice mysql stop\n\nDisable auto startup run service\nsudo systemctl disable mysql\n')),(0,o.kt)("h3",{id:"login"},"Login"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mysql -u {username} -p{password} -P {port} {dbname}\n")),(0,o.kt)("h3",{id:"drop-table"},"Drop table"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},'drop table "{tablename}";\n')),(0,o.kt)("h3",{id:"foregin_key"},"foregin_key"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"set foregin_key_checks=0;\n")),(0,o.kt)("h3",{id:"create-table"},"create table"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"create database {dbname};\n")))}p.isMDXComponent=!0}}]);