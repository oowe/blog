<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/blog/rss.xml" title="OOWE&#39;s Software Develop Notes Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/blog/atom.xml" title="OOWE&#39;s Software Develop Notes Blog Atom Feed"><title data-react-helmet="true">Blog | OOWE&#x27;s Software Develop Notes</title><meta data-react-helmet="true" property="og:title" content="Blog | OOWE&#x27;s Software Develop Notes"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="description" content="Blog"><meta data-react-helmet="true" property="og:description" content="Blog"><meta data-react-helmet="true" property="og:url" content="https://oowe.github.io/blog/blog/page/2"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_posts_list"><link data-react-helmet="true" rel="shortcut icon" href="/blog/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://oowe.github.io/blog/blog/page/2"><link data-react-helmet="true" rel="alternate" href="https://oowe.github.io/blog/blog/page/2" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://oowe.github.io/blog/blog/page/2" hreflang="x-default"><link rel="stylesheet" href="/blog/assets/css/styles.adc17638.css">
<link rel="preload" href="/blog/assets/js/runtime~main.98514d82.js" as="script">
<link rel="preload" href="/blog/assets/js/main.9de356ab.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/blog/"><img src="/blog/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/blog/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">OOWE</b></a><a class="navbar__item navbar__link" href="/blog/docs/intro">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oowe" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">Recent posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/blog/Development">Development</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/blog/work-tools">Work Tools</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/blog/copy-picture-from-iphone">Copy Picture From Iphone</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/blog/make-tel-line">Make Tel Line</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/blog/doc format">Doc Format</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/blog/survey-openadr">Survey OpenADR</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-03-24T00:00:00.000Z" itemprop="datePublished">March 24, 2022</time> · 7 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a href="https://github.com/oowe" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_9q7L" src="https://github.com/oowe.png" alt="oowe"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/oowe" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">oowe</span></a></div><small class="avatar__subtitle" itemprop="description">Marker</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="我國現行電力環境面臨以下問題對於備轉容量造成危機"></a>我國現行電力環境面臨以下問題對於備轉容量造成危機：<a class="hash-link" href="#我國現行電力環境面臨以下問題對於備轉容量造成危機" title="Direct link to heading">#</a></h3><ol><li>區域供電瓶頸</li><li>核電將逐年除役</li><li>再生能源易受氣候因素影響</li><li>新穩定能源開發不易</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="我國推動需量反應歷史"></a>我國推動需量反應歷史:<a class="hash-link" href="#我國推動需量反應歷史" title="Direct link to heading">#</a></h3><ol><li>民國 68 年起開始推動 DR(Demand Respone)</li><li>民國 109 年起推動 OADR，但仍未普及。</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="openadr-歷史"></a>OpenADR 歷史<a class="hash-link" href="#openadr-歷史" title="Direct link to heading">#</a></h3><p>起源 Electric Power Research Institute(美國電力研究所 release).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="介紹"></a>介紹<a class="hash-link" href="#介紹" title="Direct link to heading">#</a></h3><ul><li><p>什麼是 OpenADR</p><ul><li>全名: Open Automated Demand Response</li><li>中文全名:自動需求回應</li><li>最新版本: 2.0b</li><li>協定目標在於標準化，自動化電力網路之需量反應(DR)電能調度，以使公用事業商與聚合商能夠高效地管理不斷增長的能源需求與分散式能源。</li><li>分成兩個部份:<ul><li>Virtual-End-Node(VEN): 地端的角色</li><li>Virtual Top Node(VTN): 台電的角色</li></ul></li><li>OpenADR 定義了機器對機器的接口並包括信息模型，傳輸和安全機制，以及在兩個端點之間交換數據的方式。OpenADR 2.0 定義了電力服務提供商和客戶之間的信息通信內容和方式，但沒有定義任一端點如何使用信息。</li><li>OpenADR 基本功能:事件管理(Event)，程式管理(Program)，VEN 管理，自我測試及除錯。</li><li>VTN 和 VEN 溝通是利用 XMPP，是一種以 XML 為基礎的開放式即時通訊協定</li></ul></li><li><p>Service</p></li></ul><table><thead><tr><th>Service Name</th><th>Function for what?</th><th>OpenADR Profile</th></tr></thead><tbody><tr><td>Pull/Push Model</td><td></td><td>OpenADR 2.0a/b</td></tr><tr><td>Simple HTTP/XMPP</td><td></td><td>OpenADR 2.0a/b</td></tr><tr><td>Security (ECC/RSA)</td><td></td><td>OpenADR 2.0a/b</td></tr><tr><td>EiEvent</td><td></td><td>OpenADR 2.0a/b</td></tr><tr><td>EiReport</td><td></td><td>OpenADR 2.0b</td></tr><tr><td>EiOpt</td><td></td><td>OpenADR 2.0b</td></tr><tr><td>EiRegistor</td><td></td><td>OpenADR 2.0b</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="oadr-功能"></a>OADR 功能<a class="hash-link" href="#oadr-功能" title="Direct link to heading">#</a></h3><ol><li>EiRegistor 部分</li></ol><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" disabled=""> Registor VEN to VTN</li><li class="task-list-item"><input type="checkbox" disabled=""> VTN 建立允許的 VEN 清單</li><li class="task-list-item"><input type="checkbox" disabled=""> VTN 有一個 list 可知目前的連線清單</li></ul><ol start="2"><li>EiEvent 部分</li></ol><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" disabled=""> VTN 能建立事件並指定發送給某 VEN</li><li class="task-list-item"><input type="checkbox" disabled=""> VTN 會收到 VEN 是否加入的回應</li><li class="task-list-item"><input type="checkbox" disabled=""> 建立兩個事件，VEN 一個同意一個拒絕</li></ul><ol start="3"><li>EiOpt 部分</li></ol><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" disabled=""> VEN 回應某事件是否要加入</li></ul><ol start="4"><li>EiReport 部分</li></ol><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" disabled=""> VEN 可以定期回報資訊給 VTN</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="vtn-功能"></a>VTN 功能<a class="hash-link" href="#vtn-功能" title="Direct link to heading">#</a></h3><ol><li>VTN 配置(vtn_name, port, url 自定義)</li><li>註冊新的 VEN 設備</li><li>VEN 清單查詢</li><li>選顯示所選擇的 VEN 內容 (ven_name, ven_id, ven_fingerpoint)</li><li>發送 event</li><li>與 VENs 通訊紀錄</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="角色定義"></a>角色定義：<a class="hash-link" href="#角色定義" title="Direct link to heading">#</a></h3><ol><li>電力服務提供者(台電)</li><li>用戶群代表</li><li>終端使用者</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="預期的功能透過-restful-api"></a>預期的功能(透過 Restful API)<a class="hash-link" href="#預期的功能透過-restful-api" title="Direct link to heading">#</a></h3><ol><li>可以註冊新的 VEN</li><li>可以修改特定 VEN</li><li>可以刪除特定 VEN</li><li>可以查詢特定事件</li><li>可以修改特定事件</li><li>可以刪除特定事件</li><li>可以要求 VEN 報告</li><li>可以查詢特定報告</li><li>可以修改特定報告</li><li>可以刪除特定報告</li><li>可以傳送加入事件</li><li>可以傳送拒絕事件</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="部屬方式"></a>部屬方式<a class="hash-link" href="#部屬方式" title="Direct link to heading">#</a></h3><ol><li>用單機執行</li><li>Container 化</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="新聞"></a>新聞<a class="hash-link" href="#新聞" title="Direct link to heading">#</a></h3><p><a href="https://www.nextdrive.io/2018/06/22/company/%E5%A4%8F%E5%AD%A3%E6%96%B7%E9%9B%BB%E5%8D%B1%E6%A9%9F%E4%B8%8D%E5%86%8D%EF%BC%8C%E8%81%AF%E9%BD%8A%E7%A7%91%E6%8A%80%E6%8A%95%E5%85%A5%E8%87%AA%E5%8B%95%E9%9C%80%E9%87%8F%E5%8F%8D%E6%87%89%E6%8A%80/" target="_blank" rel="noopener noreferrer">夏季斷電危機不再，聯齊科技投入自動需量反應技術，調節尖峰用電</a><br>
<a href="https://www.nextdrive.io/cube-smart-energy-gateway/" target="_blank" rel="noopener noreferrer">齊聯科技 IOT Gateway</a><br>
<a href="https://www.iii.org.tw/Files/FileManager/2018%E5%B9%B4%E7%94%A2%E5%93%81%E5%9E%8B%E9%8C%84/SAVE%E8%87%AA%E5%8B%95%E9%9C%80%E9%87%8F%E5%8F%8D%E6%87%89%E7%B3%BB%E7%B5%B1%E8%88%87MIT%E8%87%AA%E5%8B%95%E9%9C%80%E9%87%8F%E5%8F%8D%E6%87%89%E7%94%A8%E6%88%B6%E7%AB%AF%E6%8A%80%E8%A1%93.pdf" target="_blank" rel="noopener noreferrer">工研院-SAVE 自動需量反應系統與 MIT 自動需量反應用戶端技術</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="epri-的資源"></a>[EPRI 的資源]<a class="hash-link" href="#epri-的資源" title="Direct link to heading">#</a></h3><ol><li><a href="https://github.com/epri-dev/OpenADR-Virtual-End-Node" target="_blank" rel="noopener noreferrer">OpenADR-Virtual-End-Node</a></li><li><a href="https://github.com/epri-dev/OpenADR-Virtual-Top-Node" target="_blank" rel="noopener noreferrer">OpenADR-Virtual-Top-Node</a></li><li><a href="https://sourceforge.net/projects/openadr2bven-pull/" target="_blank" rel="noopener noreferrer">EPRI OpenADR 2.0b Virtual End Node (VEN)</a></li><li><a href="https://sourceforge.net/projects/openadr2vtn/" target="_blank" rel="noopener noreferrer">EPRI OpenADR 2.0b Virtual Top Node (VTN)</a></li><li><a href="https://github.com/epri-dev/OpenADR-VEN-Library" target="_blank" rel="noopener noreferrer">EPRI VEN C++ Library</a></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="openleadr-的資源"></a>[openleadr 的資源]<a class="hash-link" href="#openleadr-的資源" title="Direct link to heading">#</a></h3><ol><li><a href="https://github.com/OpenLEADR/openleadr-python" target="_blank" rel="noopener noreferrer">OpenLEADR Github</a></li><li><a href="https://openleadr.org/docs/" target="_blank" rel="noopener noreferrer">OpenLEADR Document</a></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="110-年班班標案"></a>110 年班班標案<a class="hash-link" href="#110-年班班標案" title="Direct link to heading">#</a></h3><details class="details_Q743 alert alert--info details_h+cY" data-collapsed="true"><summary>展開</summary><div><div class="collapsibleContent_K5uX"><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">臺北市： 新北市：遠傳電信股份有限公司系統整合分公司 桃園市：中華電信股份有限公司數據通信分公司 臺中市：宏碁股份有限公司台中分公司 臺南市：遠傳電信股份有限公司系統整合分公司 高雄市：中華電信股份有限公司數據通信分公司 新竹縣：佰鴻工業股份有限公司 苗栗縣： 彰化縣：遠傳電信股份有限公司系統整合分公司 南投縣： 雲林縣：中華電信股份有限公司企業客戶分公司 嘉義縣：遠傳電信股份有限公司系統整合分公司 屏東縣：中華電信股份有限公司 宜蘭縣：遠傳電信股份有限公司系統整合分公司 花蓮縣：斯其大科技股份有限公司 臺東縣： 澎湖縣：宏碁股份有限公司高雄分公司 金門縣： 連江縣： 基隆市： 新竹市：三傑物聯科技股份有限公司 嘉義市：</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div></details><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="ven_id-定義"></a>ven_id 定義<a class="hash-link" href="#ven_id-定義" title="Direct link to heading">#</a></h3><p><strong>Reference from <a href="https://volttron.readthedocs.io/en/main/agent-framework/core-service-agents/openadr-ven/ven-agent.html" target="_blank" rel="noopener noreferrer">https://volttron.readthedocs.io/en/main/agent-framework/core-service-agents/openadr-ven/ven-agent.html</a></strong><br>
<strong>由 vtn 隨機給或是 VTN 自己有維護的清單可以直接對應</strong><br>
The OpenADR ID of this virtual end node. Identifies this VEN to the VTN. If automated VEN registration is used, the ID is assigned by the VTN at that time. If the VEN is registered manually with the VTN (i.e., via configuration file settings), then a common VEN ID should be entered in this config file and in the VTN’s site definition.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/blog/tags/open-adr">OpenADR</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/blog/tags/vtn">VTN</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/blog/tags/ven">VEN</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/blog/milk-serum">Milk Serum</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-03-23T00:00:00.000Z" itemprop="datePublished">March 23, 2022</time> · One min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a href="https://github.com/oowe" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_9q7L" src="https://github.com/oowe.png" alt="oowe"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/oowe" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">oowe</span></a></div><small class="avatar__subtitle" itemprop="description">Marker</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="品牌列表"></a>品牌列表<a class="hash-link" href="#品牌列表" title="Direct link to heading">#</a></h3><ol><li>MYPROTEIN</li><li>館長</li><li>果果堅果</li><li>creative power</li><li>MARS 戰神</li><li>Peeta</li><li>ON</li><li>體大 ISP</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="價格比較"></a>價格比較<a class="hash-link" href="#價格比較" title="Direct link to heading">#</a></h3><ol><li>高價: MARS 戰神 = 體大 ISP &gt; Peeta &gt; 館長 &gt; ON</li><li>平價: 果果堅果 = creative power &gt; MYPROTEIN</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="推薦口味"></a>推薦口味<a class="hash-link" href="#推薦口味" title="Direct link to heading">#</a></h3><ol><li>MYPROTEIN: 口味兩極</li><li>館長: 鐵觀音</li><li>果果堅果: 泰式奶茶(太甜), 木瓜牛奶</li><li>creative power</li><li>MARS 戰神: 多數都好喝, 巧克力太甜</li><li>Peeta: 可可</li><li>ON: 雙倍巧克力, 巧克力, 不推薦香草</li></ol></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/blog/tags/milk-serum">Milk Serum</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/blog/2021/07/21/openadr">OpenADR Introduction</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2021-07-21T00:00:00.000Z" itemprop="datePublished">July 21, 2021</time> · 5 min read</div></header><div class="markdown" itemprop="articleBody"><p>OpenADR 是由美國的實驗室(LBNL)在西元 2008 年發表 OpenADR1.0 所誕生。全名為 Open Source Auto Demand Resonse(自動需量反應)。<br>
目的是一種通訊的協定，定義能源互相操控各式訊息，用以傳遞價格、可靠度及在緊急時的通訊。此類訊息可以在任何可用的通訊界面上進行交換，此定義和技術通訊無關。<br>
台電目前，今年七月開始導入 OpenADR 和國中小學的 EMS 系統溝通，主要希望能夠改善用戶的負載型態，提高能源的使用率，平衡尖峰與離峰負仔和減少電能消耗。諸多國外市場已採用需量反應制度。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="名詞定義"></a>名詞定義：<a class="hash-link" href="#名詞定義" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">VTN: Virtrul Top Node (電力供應者:台電的角色)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">VEN: Virtrul End Node (終端設備:國中小學的 EMS 系統)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">OpenADR 運作原理：</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">通常會由 VTN 發起事件(Event)到 VEN 請裝置配合。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">VEN 會回報(report)到 VTN，提供 VTN 進行分析與判斷。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">實際的溝通訊息，由台電和供應商之間所協議。 (ADR 聯盟有初版定義仍可自訂)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">台電需要提供各學校的 ven_name 的名稱對應表，才會拿到對的 ven_id。</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="openadr20b-規格包含"></a>OpenADR2.0b 規格包含:<a class="hash-link" href="#openadr20b-規格包含" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Pull/Push Model (SimpleHttp 使用)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">SimpleHTTP/XMPP (VTN 都必須支援、VEN 可支援其一)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Security(ECC/RCA) (至少要 LTS1.2 版本)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">EiEvent (VTN 發出事件給 VEN)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">EiReport (VEN 向 VTN 回報)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">EiOpt (VEN 收到 Event 回覆 Opt-in 或 Opt-out)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">EiRegistor (VEN 向 VTN 註冊)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Pull/Push Model 部分</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">由 VTN 到 VTN 是 Push</span></span><span class="token-line" style="color:#393A34"><span class="token plain">由 VEN 到 VTN 是 Pull</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   絕大多數的情況是 Pull(VEN 傳訊息到 VTN)，優點是安全性高及便利性，VEN 可以不需要有實體對外 IP 位置；缺點是溝通效率較差，有 Poll 去問才知道新的訊息。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">SimpleHTTP/XMPP 部分</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  openleadr 是主要採用 SimpleHttp，EPRI 是 XMPP 協定。但其實兩者都可以更換。依 OpenADR 聯盟規定，VTN 需要同時支援兩者，而 VEN 可同時支援或擇一。</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Security(ECC/RCA) 部分</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="eievent-部分"></a>EiEvent 部分<a class="hash-link" href="#eievent-部分" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">   是 OpenADR 的核心服務，VTN 透過此服務將需量反應的必要資訊傳送到各個 VEN 設備。VTN 可以建立多個 Event，指派給不同的 ven_id、group_id、source_id 等目標 Target。</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">※ 待了解 EiEvent 的訊號時間軸，怎麼在程式上設定</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Notification time: 事件前的通知時間，在 Active state 之前。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Rampup time: VEN 收到 Event 若回覆同意之後逐步卸除負載的時間。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Active time: 事件啟動時間，搭配 Duration 參數。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Recovery time: 當事件結束後，VEN 逐步恢復負載的時間。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">main function (add_event):</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="eireport-部分"></a>EiReport 部分<a class="hash-link" href="#eireport-部分" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">報表回覆功能，可自訂成一次性報告或是定期性兩種。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">報表類型包含 METADATA、DATA REPORTS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">DATA REPORTS 包含</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">History (歷史資料)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">telemetey (定期資料)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MATADATA 是說明 DATA REPORT 的格式</span></span><span class="token-line" style="color:#393A34"><span class="token plain">DATA REPORT 是回報資料點的數據，可以同時包含一個或多個資料點。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">main function (add_report):</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="eiopt-部分"></a>EiOpt 部分<a class="hash-link" href="#eiopt-部分" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Opt 服務是讓</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">EiRegistor 部分</span></span><span class="token-line" style="color:#393A34"><span class="token plain">運作原理:先 Query 得到 VTN 資訊在傳送 Create 註冊，最後 VTN 回傳 Created 給 VEN 回傳成功。</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">查詢註冊</span></span><span class="token-line" style="color:#393A34"><span class="token plain">VEN 先運行 oadrQueryRegistartion()傳到 VTN，接著 VTN 再傳 oadrCreatedPartyRegistration(VTN Info)給 VEN。</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">註冊創建</span></span><span class="token-line" style="color:#393A34"><span class="token plain">VEN 再運行 oadrCreatePartyRegistration(VEN Info)傳到 VTN，接著 VTN 再傳 oadrCreatedPartyRegistration(VTN Info, registrationID)接著 VEN。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">完成註冊</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">重新註冊</span></span><span class="token-line" style="color:#393A34"><span class="token plain">可由</span></span><span class="token-line" style="color:#393A34"><span class="token plain">VTN 先運行 oadrRequestRegistration(VEN ID)傳到 VEN，接著 VTN 傳 oadrRespose()傳到 VEN。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">或者</span></span><span class="token-line" style="color:#393A34"><span class="token plain">VEN 再運行 oadrCreatedPartyRegistration(VEN Info, registrationID)傳到 VTN，接著 VTN 再傳 oadrCreatedPartyRegistration(VTN Info, registrationID)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">取消註冊</span></span><span class="token-line" style="color:#393A34"><span class="token plain">雙方都可以執行</span></span><span class="token-line" style="color:#393A34"><span class="token plain">運行 oadrCancellPartyRegistration(registrationID)傳到 VTN，接著對方再傳 oadrCancelledPartyRegistration()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="備註"></a>備註<a class="hash-link" href="#備註" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">openleadr 使用的環境</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">openleadr 版本: 0.5.24</span></span><span class="token-line" style="color:#393A34"><span class="token plain">python3.7 以上</span></span><span class="token-line" style="color:#393A34"><span class="token plain">有使用到的套件</span></span><span class="token-line" style="color:#393A34"><span class="token plain">xmltodict</span></span><span class="token-line" style="color:#393A34"><span class="token plain">aiohttp</span></span><span class="token-line" style="color:#393A34"><span class="token plain">apscheduler</span></span><span class="token-line" style="color:#393A34"><span class="token plain">jinja2</span></span><span class="token-line" style="color:#393A34"><span class="token plain">signxml-openadr-2.9.1</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/blog"><div class="pagination-nav__label">« Newer Entries</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Local Link</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/docs/intro">Doc</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">About Me</div><ul class="footer__items"><li class="footer__item"><a href="mailto:oowe9564@gmail.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gmail<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/aaron-chang-oowe/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oowe" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022-2022 OOWE. Built with Docusaurus.</div></div></div></footer></div>
<script src="/blog/assets/js/runtime~main.98514d82.js"></script>
<script src="/blog/assets/js/main.9de356ab.js"></script>
</body>
</html>